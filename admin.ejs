
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ููุญุฉ ุงููุดุฑู</title>
</head>
<body>
  <h1>ูุฑุญุจุงู <%= user.nickname %> (ุงูุฏูุฑ: <%= user.role %>)</h1>

  <h2>ุงููุณุชุฎุฏููู</h2>
  <table border="1" cellpadding="5" cellspacing="0">
    <tr>
      <th>ุฑูู</th><th>ุงุณู ุงููุณุชุฎุฏู</th><th>ุงูููุจ</th><th>ุงูุชุญุฐูุฑุงุช</th><th>ุงูุชูุจููุงุช</th>
      <th>ุจุทุงูุฉ ุงููุงููููุฏุง ๐ด</th><th>ุจููู ุงูุญุงูู</th><th>ุจููู ุงูุดูุฑ ุงููุงุฏู</th><th>ุงูุฏูุฑ</th>
      <th>ุฅุฌุฑุงุกุงุช</th>
    </tr>
    <% users.forEach((u, index) => { %>
      <tr>
        <td><%= index + 1 %></td>
        <td><%= u.username %></td>
        <form method="POST" action="/users/<%= u.id %>/edit">
          <td><input name="nickname" value="<%= u.nickname %>" required></td>
          <td><input name="warnings" type="number" value="<%= u.warnings %>" min="0"></td>
          <td><input name="alerts" type="number" value="<%= u.alerts %>" min="0"></td>
          <td>
            <select name="hasCard">
              <option value="1" <%= u.hasCard ? 'selected' : '' %>>ูุนู ๐ด</option>
              <option value="0" <%= !u.hasCard ? 'selected' : '' %>>ูุง</option>
            </select>
          </td>
          <td><input name="billyCurrent" type="number" value="<%= u.billyCurrent %>" min="0"></td>
          <td><input name="billyNext" type="number" value="<%= u.billyNext %>" min="0"></td>
          <td><%= u.role %></td>
          <td>
            <button type="submit">ุญูุธ</button>
        </form>
            <form method="POST" action="/users/<%= u.id %>/delete" style="display:inline" onsubmit="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ');">
              <button type="submit" style="background:red;color:white;">ุญุฐู</button>
            </form>
          </td>
      </tr>
    <% }) %>
  </table>

  <h2>ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ</h2>
  <form method="POST" action="/users/create">
    <input name="username" placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
    <input name="password" type="password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
    <input name="nickname" placeholder="ุงูููุจ" required>
    <select name="role" required>
      <option value="user">ุนุถู</option>
      <option value="moderator">ูุดุฑู</option>
      <option value="admin">ุฌุงุฏุฌ</option>
    </select>
    <button type="submit">ุฅูุดุงุก</button>
  </form>

  <h2>ุชุญููู ุจููู</h2>
  <form method="POST" action="/transfer">
    <input name="toUsername" placeholder="ุงุณู ุงููุณุชูู" required>
    <input name="amount" type="number" placeholder="ุงููุจูุบ" required>
    <button type="submit">ุชุญููู</button>
  </form>

  <h2>ุณุฌู ูู ุงูุชุญูููุงุช</h2>
  <ul>
    <% transfers.forEach(t => { %>
      <li>
        <%= t.date.slice(0,16).replace('T',' ') %>: 
        <%= t.fromNick %> โ <%= t.toNick %> (ุจููู: <%= t.amount %>)
      </li>
    <% }) %>
  </ul>

  <p><a href="/logout">ุชุณุฌูู ุงูุฎุฑูุฌ</a></p>
</body>
</html>
